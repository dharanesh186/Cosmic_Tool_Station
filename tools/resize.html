<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <!-- SEO META TAGS -->
  <title>Nebula Pro | Auto-Detect Image Resizer</title>
  <meta name="description" content="Free online image resizer with automatic dimension detection. Resize JPG, PNG, and WebP images instantly with smart crop or stretch options and direct download.">
  <meta name="keywords" content="image resizer, auto image resize, resize jpg png webp, online image resizer, free image tools, bulk image resize">
  <meta name="robots" content="index, follow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root { --nebula: #6e45e2; --cyan: #00f2ff; --glass: rgba(255, 255, 255, 0.08); }
    body { 
      font-family: 'Inter', sans-serif; max-width: 1000px; margin: auto; padding: 40px 20px; 
      background: radial-gradient(circle at top right, #1b2735 0%, #090a0f 100%);
      color: #fff; min-height: 100vh;
    }
    .main-container { display: grid; grid-template-columns: 320px 1fr; gap: 30px; }
    .panel {
      background: var(--glass); padding: 25px; border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px);
    }
    .control-group { margin-bottom: 25px; position: relative; }
    label { display: block; font-size: 0.75rem; color: #aaa; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;}
    input, select {
      width: 100%; padding: 12px; background: #000; border: 1px solid #444;
      border-radius: 8px; color: white; font-family: inherit; box-sizing: border-box;
    }
    .drop-zone {
      border: 2px dashed var(--nebula); border-radius: 12px; padding: 60px 20px;
      text-align: center; cursor: pointer; background: rgba(0,0,0,0.2); transition: 0.3s;
    }
    .drop-zone:hover { border-color: var(--cyan); background: rgba(0,242,255,0.05); }
    .btn-run {
      width: 100%; padding: 18px; background: linear-gradient(135deg, var(--nebula), #4b2cc0);
      color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;
      text-transform: uppercase; letter-spacing: 2px;
    }
    .auto-badge {
      position: absolute; right: 10px; top: 32px; font-size: 0.6rem; 
      background: var(--cyan); color: #000; padding: 2px 6px; border-radius: 4px; font-weight: bold;
    }
    #fileList { margin-top: 20px; max-height: 250px; overflow-y: auto; }
    .file-row { padding: 10px; border-bottom: 1px solid #333; font-size: 0.8rem; display: flex; justify-content: space-between;}
    .back-btn { display:inline-block; margin-bottom:20px; color:#00f2ff; text-decoration:none; }
  </style>
</head>

<body>

<a href="../index.html" class="back-btn">‚Üê Back to Mission Control</a>

<h1 style="text-align:center; letter-spacing: 6px; text-transform: uppercase;">‚ÜîÔ∏è Resizer</h1>

<div class="main-container">
  <div class="panel">
    <h2>Engine Config</h2>
    
    <div class="control-group">
      <label>Width (px)</label>
      <input type="number" id="targetW" value="0">
      <span class="auto-badge" id="wBadge">Auto</span>
    </div>
    
    <div class="control-group">
      <label>Height (px)</label>
      <input type="number" id="targetH" value="0">
      <span class="auto-badge" id="hBadge">Auto</span>
    </div>

    <div class="control-group">
      <label>Fit Method</label>
      <select id="fitMethod">
        <option value="contain">Smart Crop (Fill)</option>
        <option value="stretch">Stretch</option>
      </select>
    </div>

    <div class="control-group">
      <label>Quality <span id="qLabel" style="color:var(--cyan)">90%</span></label>
      <input type="range" id="quality" min="10" max="100" value="90"
        oninput="document.getElementById('qLabel').innerText = this.value + '%'">
    </div>

    <button class="btn-run" onclick="processAll()">üöÄ Execute Direct Download</button>
  </div>

  <div class="panel">
    <div class="drop-zone" onclick="document.getElementById('fileInput').click()">
      <p style="font-size: 1.1rem; margin: 0;">Drop Image to Detect Dimensions</p>
      <p style="font-size: 0.75rem; opacity: 0.5; margin-top: 8px;">Supports JPG, PNG, WebP</p>
      <input type="file" id="fileInput" multiple accept="image/*" style="display:none"
        onchange="autoDetect(this.files)">
    </div>

    <div id="fileList"></div>
  </div>
</div>

<script>
  let queue = [];

  async function autoDetect(files) {
    queue = Array.from(files);
    const list = document.getElementById('fileList');
    list.innerHTML = "";

    if (queue.length > 0) {
      const firstFile = queue[0];
      const img = new Image();
      img.onload = function() {
        document.getElementById('targetW').value = this.width;
        document.getElementById('targetH').value = this.height;
        document.getElementById('wBadge').innerText = "Detected";
        document.getElementById('hBadge').innerText = "Detected";
      };
      img.src = URL.createObjectURL(firstFile);

      queue.forEach(f => {
        list.innerHTML += `<div class="file-row"><span>${f.name}</span><span style="color:var(--cyan)">Captured</span></div>`;
      });
    }
  }

  async function processAll() {
    if (queue.length === 0) return alert("No images attached!");

    const w = parseInt(document.getElementById('targetW').value);
    const h = parseInt(document.getElementById('targetH').value);
    const q = parseInt(document.getElementById('quality').value);
    const method = document.getElementById('fitMethod').value;

    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = w;
    canvas.height = h;

    for (let file of queue) {
      const img = await new Promise(res => {
        const i = new Image();
        i.onload = () => res(i);
        i.src = URL.createObjectURL(file);
      });

      ctx.clearRect(0,0,w,h);
      ctx.imageSmoothingQuality = 'high';

      if(method === 'stretch') {
        ctx.drawImage(img, 0, 0, w, h);
      } else {
        const r = img.width / img.height;
        const cr = w / h;
        let dW, dH, oX, oY;
        if (r > cr) { dH = h; dW = h * r; oX = (w - dW)/2; oY = 0; }
        else { dW = w; dH = w / r; oX = 0; oY = (h - dH)/2; }
        ctx.drawImage(img, oX, oY, dW, dH);
      }

      const format = q === 100 ? "image/png" : "image/jpeg";
      const dataUrl = canvas.toDataURL(format, q/100);
      
      const link = document.createElement('a');
      link.download = `resized_${file.name}`;
      link.href = dataUrl;
      link.click();

      URL.revokeObjectURL(img.src);
    }
  }
</script>

</body>
</html>
